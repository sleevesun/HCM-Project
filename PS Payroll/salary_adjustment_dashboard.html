<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è–ªé…¬è°ƒè–ª - HRè‡ªåŠ©å·¥ä½œå°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background-color: #f7f8fa;
            color: #1d2129;
            line-height: 1.5715;
            font-size: 14px;
            overflow-x: hidden;
        }

        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .top-navbar {
            background: #ffffff;
            color: #1d2129;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            border-bottom: 1px solid #e5e6eb;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .logo {
            font-size: 16px;
            font-weight: bold;
            color: #E53E3E;
        }

        .nav-tabs {
            display: flex;
            gap: 0;
        }

        .nav-tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-size: 14px;
            color: #86909c;
            transition: all 0.2s;
        }

        .nav-tab.active {
            background: #f2f3f5;
            color: #165dff;
            border-bottom: 2px solid #165dff;
            font-weight: 500;
        }

        .nav-tab:hover:not(.active) {
            color: #165dff;
            background: #f2f3f5;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .user-avatar {
            width: 24px;
            height: 24px;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
        }

        .switch-btn {
            padding: 6px 12px;
            background: #f2f3f5;
            color: #1d2129;
            border: 1px solid #c9cdd4;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .switch-btn:hover {
            border-color: #165dff;
            color: #165dff;
        }

        /* ä¸»å®¹å™¨ */
        .main-container {
            display: flex;
            margin-top: 48px;
            height: calc(100vh - 48px);
        }

        /* å·¦ä¾§èœå•æ  */
        .sidebar {
            width: 240px;
            background: #ffffff;
            border-right: 1px solid #e5e6eb;
            overflow-y: auto;
            box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        }

        .menu-item {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .menu-header {
            padding: 12px 16px;
            background: transparent;
            border-bottom: none;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #1d2129;
            transition: all 0.2s;
        }

        .menu-header:hover {
            background: #f2f3f5;
        }

        .menu-header.active {
            background: #e8f3ff;
            color: #165dff;
        }

        .menu-icon {
            font-size: 16px;
        }



        .submenu {
            background: #ffffff;
            border-top: 1px solid #f2f3f5;
        }

        .submenu-item {
            padding: 8px 32px;
            font-size: 12px;
            cursor: pointer;
            border-bottom: 1px solid #f2f3f5;
            display: flex;
            align-items: center;
            color: #86909c;
            transition: all 0.2s;
        }

        .submenu-item:hover {
            background: #f2f3f5;
            color: #1d2129;
        }

        .submenu-item.active {
            background: #e8f3ff;
            color: #165dff;
            font-weight: 500;
        }

        /* ä¸»å†…å®¹åŒº */
        .content-area {
            flex: 1;
            background: #f7f8fa;
            overflow-y: auto;
            padding: 24px;
        }

        .content-header {
            background: #FFFFFF;
            color: #333333;
            padding: 16px 24px;
            border: 1px solid #D9D9D9;
            border-radius: 4px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .content-title {
            font-size: 20px;
            font-weight: bold;
            line-height: 1.5;
        }

        .status-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 24px;
        }

        .status-tab {
            padding: 8px 16px;
            background: transparent;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-size: 14px;
            color: #666666;
            transition: all 0.2s;
        }

        .status-tab.active {
            background: #FFFFFF;
            color: #1d2129;
            border-bottom: 2px solid #165dff;
            font-weight: 500;
        }

        .status-tab:hover:not(.active) {
            color: #165dff;
            background: #f2f3f5;
        }

        .content-card {
            background: #FFFFFF;
            border: 1px solid #D9D9D9;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .card-header {
            padding: 16px 24px;
            background: #F0F2F5;
            border-bottom: 1px solid #D9D9D9;
            border-radius: 4px 4px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title {
            font-size: 16px;
            font-weight: bold;
            color: #333333;
            line-height: 1.5;
        }

        .action-btn {
            padding: 8px 16px;
            background: #165dff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(22, 93, 255, 0.2);
        }

        .action-btn:hover {
            background: #4080ff;
            box-shadow: 0 4px 8px rgba(22, 93, 255, 0.3);
        }

        .action-btn:active {
            background: #0e42d2;
            box-shadow: 0 1px 2px rgba(22, 93, 255, 0.4);
        }

        /* è¡¨æ ¼æ ·å¼ */
        .table-container {
            background: white;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            border: 1px solid #D9D9D9;
        }

        th {
            background: #f7f8fa;
            padding: 12px 16px;
            text-align: left;
            font-weight: 500;
            color: #1d2129;
            border-right: 1px solid #e5e6eb;
            border-bottom: 1px solid #e5e6eb;
            white-space: nowrap;
        }

        td {
            padding: 12px 16px;
            border-right: 1px solid #f2f3f5;
            border-bottom: 1px solid #f2f3f5;
            color: #1d2129;
            background: white;
        }

        tr:nth-child(even) td {
            background: #FAFAFA;
        }

        tr:hover td {
            background: #F0F8FF;
        }

        .link {
            color: #165dff;
            text-decoration: none;
            cursor: pointer;
            margin-right: 8px;
            transition: color 0.2s;
            font-weight: 500;
        }

        .link:hover {
            color: #4080ff;
            text-decoration: underline;
        }

        .positive {
            color: #52C41A;
        }

        .negative {
            color: #FF4D4F;
        }

        /* å¼¹çª—æ ·å¼ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            overflow-y: auto;
        }

        .modal-container {
            position: relative;
            width: 95%;
            max-width: 1400px;
            margin: 20px auto;
            background: #f7f8fa;
            border-radius: 8px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-height: calc(100vh - 40px);
        }

        .modal-header {
            background: #ffffff;
            padding: 16px 24px;
            border-bottom: 1px solid #e5e6eb;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: #1d2129;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #86909c;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: #f2f3f5;
            color: #1d2129;
        }

        .modal-content {
            padding: 24px;
        }

        /* å¼¹çª—å†…çš„æ ·å¼ - å¤åˆ¶è‡ªpayroll_management.html */
        .modal-content .container {
            max-width: none;
            margin: 0;
            padding: 0;
        }

        .modal-content .header {
            background: #FFFFFF;
            color: #1d2129;
            padding: 16px 24px;
            border-bottom: 1px solid #e5e6eb;
            border-radius: 6px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .modal-content .page-title {
            font-size: 16px;
            font-weight: 600;
            line-height: 1.5715;
            color: #1d2129;
            margin-bottom: 8px;
        }

        .modal-content .page-subtitle {
            font-size: 12px;
            color: #86909c;
            margin-bottom: 16px;
        }

        .modal-content .summary-info {
            display: flex;
            gap: 16px;
            margin-top: 8px;
        }

        .modal-content .summary-item {
            background: #FFFFFF;
            padding: 12px;
            border-radius: 6px;
            text-align: center;
            border: 1px solid #e5e6eb;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            font-size: 11px;
            color: #1d2129;
            margin-bottom: 8px;
        }

        .modal-content .summary-value {
            font-size: 18px;
            font-weight: 600;
            color: #1d2129;
            margin-bottom: 4px;
            margin-left: 4px;
        }

        .modal-content .content-card {
            background: #FFFFFF;
            border: 1px solid #e5e6eb;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .modal-content .section-header {
            padding: 12px 20px;
            border-bottom: 1px solid #e5e6eb;
            font-size: 13px;
            font-weight: 500;
            color: #1d2129;
            background: #f7f8fa;
            line-height: 1.5715;
        }

        .modal-content .table-container {
            overflow-x: auto;
            background: white;
        }

        .modal-content table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
            border: 1px solid #e5e6eb;
            table-layout: auto;
        }

        .modal-content th {
            background: #f7f8fa;
            padding: 8px 8px;
            text-align: left;
            font-weight: 500;
            color: #1d2129;
            border-right: 1px solid #e5e6eb;
            border-bottom: 1px solid #e5e6eb;
            white-space: nowrap;
            font-size: 11px;
        }

        .modal-content td {
            padding: 8px 8px;
            border-right: 1px solid #f2f3f5;
            border-bottom: 1px solid #f2f3f5;
            color: #1d2129;
            background: white;
            white-space: nowrap;
        }

        .modal-content th:nth-child(1), .modal-content td:nth-child(1) { width: 40px; min-width: 40px; }
        .modal-content th:nth-child(2), .modal-content td:nth-child(2) { width: 80px; min-width: 80px; }
        .modal-content th:nth-child(3), .modal-content td:nth-child(3) { width: 70px; min-width: 70px; }
        .modal-content th:nth-child(4), .modal-content td:nth-child(4) { width: 70px; min-width: 70px; }
        .modal-content th:nth-child(5), .modal-content td:nth-child(5) { width: 80px; min-width: 80px; }
        .modal-content th:nth-child(6), .modal-content td:nth-child(6) { width: 80px; min-width: 80px; }
        .modal-content th:nth-child(7), .modal-content td:nth-child(7) { width: 120px; min-width: 120px; }
        .modal-content th:nth-child(8), .modal-content td:nth-child(8) { width: 60px; min-width: 60px; }
        .modal-content th:nth-child(9), .modal-content td:nth-child(9) { width: 60px; min-width: 60px; }
        .modal-content th:nth-child(10), .modal-content td:nth-child(10) { width: 80px; min-width: 80px; }
        .modal-content th:nth-child(11), .modal-content td:nth-child(11) { width: 80px; min-width: 80px; }
        .modal-content th:nth-child(12), .modal-content td:nth-child(12) { width: 50px; min-width: 50px; }
        .modal-content th:nth-child(13), .modal-content td:nth-child(13) { width: 100px; min-width: 100px; }
        .modal-content th:nth-child(14), .modal-content td:nth-child(14) { width: 80px; min-width: 80px; }
        .modal-content th:nth-child(15), .modal-content td:nth-child(15) { width: 100px; min-width: 100px; }

        .modal-content .employee-id-input {
            width: 100%;
            max-width: 70px;
            border: 1px solid #c9cdd4;
            border-radius: 4px;
            padding: 4px 6px;
            font-size: 11px;
            color: #1d2129;
            background: #ffffff;
            box-sizing: border-box;
        }

        .modal-content .employee-id-input:focus {
            border-color: #165dff;
            outline: none;
            box-shadow: 0 0 0 2px rgba(22, 93, 255, 0.1);
        }

        .modal-content tr:nth-child(even) td {
            background: #f7f8fa;
        }

        .modal-content tr:hover td {
            background: #e8f3ff;
        }

        .modal-content .positive {
            color: #52C41A;
        }

        .modal-content .negative {
            color: #FF4D4F;
        }

        .modal-content .link {
            color: #165dff;
            text-decoration: none;
            cursor: pointer;
            margin-right: 8px;
            transition: color 0.2s;
            font-weight: 500;
        }

        .modal-content .link:hover {
            color: #4080ff;
            text-decoration: underline;
        }

        .modal-content .actions {
            padding: 16px 24px;
            border-top: 1px solid #e5e6eb;
            display: flex;
            gap: 12px;
            background: #f7f8fa;
        }

        .modal-content .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 11px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            margin-right: 8px;
        }

        .modal-content .btn:hover {
            border-color: #165dff;
            color: #165dff;
        }

        .modal-content .btn:active {
            border-color: #0e42d2;
            color: #0e42d2;
        }

        .modal-content .btn-primary {
            background: #165dff;
            color: white;
            box-shadow: 0 2px 4px rgba(22, 93, 255, 0.2);
        }

        .modal-content .btn-primary:hover {
            background: #4080ff;
            box-shadow: 0 4px 8px rgba(22, 93, 255, 0.3);
        }

        .modal-content .btn-secondary {
            background: #f2f3f5;
            color: #1d2129;
            border: 1px solid #c9cdd4;
        }

        .modal-content .btn-secondary:hover {
            background: #e5e6eb;
        }

        .modal-content .status-badge {
            padding: 2px 6px;
            font-size: 10px;
            font-weight: 500;
            border: 1px solid transparent;
            border-radius: 3px;
        }

        .modal-content .status-a {
            background: #e8f3ff;
            color: #165dff;
            border: 1px solid #bedaff;
        }

        .modal-content .status-b {
            background: #e8ffea;
            color: #00b42a;
            border: 1px solid #7bc77e;
        }

        .modal-content .status-s {
            background: #fff7e8;
            color: #ff7d00;
            border: 1px solid #ffb65d;
        }

        .modal-content .date-selector {
            padding: 6px 10px;
            border: 1px solid #c9cdd4;
            border-radius: 4px;
            font-size: 11px;
            color: #1d2129;
            background: #FFFFFF;
            cursor: pointer;
            outline: none;
            transition: all 0.2s;
        }

        .modal-content .date-selector:focus {
            border-color: #165dff;
            box-shadow: 0 0 0 2px rgba(22, 93, 255, 0.2);
        }

        .modal-content .part-time-rule {
            padding: 4px 8px;
            border: 1px solid #c9cdd4;
            border-radius: 4px;
            background: #FFFFFF;
            color: #1d2129;
            font-size: 10px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.2s;
        }

        .modal-content .part-time-rule:hover {
            border-color: #165dff;
            color: #165dff;
        }

        .modal-content .part-time-rule:disabled {
            background: #f7f8fa;
            color: #c9cdd4;
            border-color: #e5e6eb;
            cursor: not-allowed;
        }

        .modal-content .dropdown {
            position: relative;
            display: inline-block;
        }

        .modal-content .dropdown-content {
            display: none;
            position: absolute;
            background-color: white;
            min-width: 140px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e6eb;
            border-radius: 6px;
            z-index: 1000;
            top: 100%;
            left: 0;
        }

        .modal-content .dropdown-content a {
            color: #1d2129;
            padding: 6px 10px;
            text-decoration: none;
            display: block;
            font-size: 11px;
            border-bottom: 1px solid #f2f3f5;
            transition: background-color 0.2s;
        }

        .modal-content .dropdown-content a:hover {
            background-color: #e8f3ff;
            color: #165dff;
        }

        .modal-content .dropdown:hover .dropdown-content {
            display: block;
        }

        /* å…¼å²—è°ƒè–ªè§„åˆ™å¼¹çª—æ ·å¼ */
        .part-time-modal {
            display: none;
            position: fixed;
            z-index: 3000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .part-time-modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 8px;
            width: 600px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .part-time-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #e5e6eb;
            background-color: #f8f9fa;
            border-radius: 8px 8px 0 0;
        }

        .part-time-modal-title {
            font-size: 16px;
            font-weight: 500;
            color: #333;
        }

        .part-time-modal-close {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .part-time-modal-close:hover {
            color: #333;
        }

        .part-time-form-group {
            margin-bottom: 15px;
        }

        .part-time-form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }

        .part-time-form-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .part-time-form-input:focus {
            outline: none;
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
        }

        .part-time-percentage-group {
            display: flex;
            gap: 15px;
        }

        .part-time-percentage-item {
            flex: 1;
        }

        .part-time-modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding: 16px 20px;
            border-top: 1px solid #e5e6eb;
            background-color: #f8f9fa;
            border-radius: 0 0 8px 8px;
        }

        .part-time-modal-btn {
            padding: 8px 16px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 14px;
        }

        .part-time-modal-btn-primary {
            background: #1890ff;
            border-color: #1890ff;
            color: white;
        }

        .part-time-modal-btn:hover {
            border-color: #40a9ff;
        }

        .part-time-modal-btn-primary:hover {
            background: #40a9ff;
        }

        .part-time-modal-body {
            padding: 20px;
        }

        .part-time-employee-info {
            margin-bottom: 20px;
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 6px;
        }

        .employee-basic-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .employee-name, .employee-total-adjustment {
            font-size: 14px;
            color: #333;
        }

        .part-time-jobs-table {
            margin-bottom: 20px;
        }

        .jobs-table {
            width: 100%;
            border-collapse: collapse;
            border: 1px solid #ddd;
        }

        .jobs-table th,
        .jobs-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }

        .jobs-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .job-adjustment-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            box-sizing: border-box;
        }

        .job-adjustment-input:focus {
            outline: none;
            border-color: #4a90e2;
            box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2);
        }

        .part-time-validation-info {
            padding: 12px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #ddd;
        }

        .validation-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .validation-row:last-of-type {
            margin-bottom: 0;
        }

        .current-total {
            font-weight: 600;
            color: #333;
        }

        .expected-total {
            font-weight: 600;
            color: #666;
        }

        .validation-message {
            margin-top: 8px;
            font-size: 13px;
            font-weight: 500;
        }

        .validation-message.error {
            color: #dc3545;
        }

        .validation-message.success {
            color: #28a745;
        }

        .part-time-modal-btn-primary:disabled {
            background-color: #ccc;
            border-color: #ccc;
            cursor: not-allowed;
        }

        .part-time-modal-btn-primary:disabled:hover {
            background-color: #ccc;
            border-color: #ccc;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="top-navbar">
        <div class="logo-section">
            <div class="logo">å®Œç¾ä¸–ç•Œ</div>
            <div class="nav-tabs">
                <div class="nav-tab active">HRè‡ªåŠ©å·¥ä½œå°</div>
                <div class="nav-tab">HRå°å§å§</div>
            </div>
        </div>
        <div class="user-section">
            <div class="user-info">
                <div class="user-avatar">ğŸ‘¤</div>
                <span>æ™® 120082 120082</span>
            </div>
            <button class="switch-btn">åˆ‡æ¢æ—§ç‰ˆ</button>
        </div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="main-container">
        <!-- å·¦ä¾§èœå•æ  -->
        <div class="sidebar">
            <div class="menu-item">
                <div class="menu-header">
                    <span class="menu-icon">ğŸ“</span>
                    å‘˜å·¥è‡ªåŠ©
                </div>
            </div>
            <div class="menu-item">
                <div class="menu-header">
                    <span class="menu-icon">ğŸ“</span>
                    æµç¨‹å®¡æ‰¹
                </div>
            </div>
            <div class="menu-item">
                <div class="menu-header active">
                    <span class="menu-icon">ğŸ“</span>
                    HRGè‡ªåŠ©
                </div>
                <div class="submenu">
                    <div class="submenu-item">å‘˜å·¥æ¡£æ¡ˆ</div>
                    <div class="submenu-item">å‘˜å·¥å‘å±•</div>
                    <div class="submenu-item">å…¥èŒç®¡ç†</div>
                    <div class="submenu-item">å®ä¹ ç”Ÿç®¡ç†</div>
                    <div class="submenu-item">è½¬æ­£ç®¡ç†</div>
                    <div class="submenu-item">è°ƒåŠ¨ç®¡ç†</div>
                    <div class="submenu-item">ç¦»èŒç®¡ç†</div>
                    <div class="submenu-item active">è°ƒè–ªç®¡ç†</div>
                </div>
            </div>
            <div class="menu-item">
                <div class="menu-header">
                    <span class="menu-icon">ğŸ“</span>
                    æ‹›è˜è‡ªåŠ©
                </div>
            </div>
        </div>

        <!-- ä¸»å†…å®¹åŒº -->
        <div class="content-area">
            <div class="content-header">
                <div class="content-title">è–ªé…¬è°ƒè–ª</div>
            </div>

            <!-- çŠ¶æ€ç­›é€‰æ ‡ç­¾ -->
            <div class="status-tabs">
                <div class="status-tab active">å¾…å‘èµ·</div>
                <div class="status-tab">è¿›è¡Œä¸­</div>
                <div class="status-tab">å·²å®Œæˆ</div>
                <div class="status-tab">å…¨éƒ¨</div>
            </div>

            <!-- å†…å®¹å¡ç‰‡ -->
            <div class="content-card">
                <div class="card-header">
                    <div class="card-title">å¾…å‘èµ·æµç¨‹</div>
                    <button class="action-btn" onclick="openNewPayrollModal()">å‘èµ·è°ƒè–ªæµç¨‹</button>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>æµç¨‹ç¼–å·</th>
                                <th>æ‰€å±éƒ¨é—¨</th>
                                <th>è°ƒè–ªäººæ•°</th>
                                <th>æœˆè–ªå˜åŒ–</th>
                                <th>æœ¬å¹´å·¥èµ„æˆæœ¬å˜åŒ–</th>
                                <th>ç”Ÿæ•ˆæ—¶é—´</th>
                                <th>æ“ä½œ</th>
                                <th>è¯¦æƒ…</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>123456</td>
                                <td>ABCå·¥ä½œå®¤</td>
                                <td>10</td>
                                <td class="negative">+18.3ä¸‡</td>
                                <td class="negative">+77.2ä¸‡</td>
                                <td>2025/09</td>
                                <td>
                                    <a href="#" class="link">æµç¨‹å…³é—­</a>
                                    <a href="#" class="link">é‡æ–°æäº¤</a>
                                </td>
                                <td>
                                    <a href="#" class="link" onclick="openPayrollModal()">æŸ¥çœ‹è¯¦æƒ…</a>
                                </td>
                            </tr>
                            <tr>
                                <td>123457</td>
                                <td>æŠ€æœ¯éƒ¨</td>
                                <td>15</td>
                                <td class="negative">+25.6ä¸‡</td>
                                <td class="negative">+102.4ä¸‡</td>
                                <td>2025/10</td>
                                <td>
                                    <a href="#" class="link">æµç¨‹å…³é—­</a>
                                    <a href="#" class="link">é‡æ–°æäº¤</a>
                                </td>
                                <td>
                                    <a href="#" class="link" onclick="openPayrollModal()">æŸ¥çœ‹è¯¦æƒ…</a>
                                </td>
                            </tr>
                            <tr>
                                <td>123458</td>
                                <td>äº§å“éƒ¨</td>
                                <td>8</td>
                                <td class="negative">+12.8ä¸‡</td>
                                <td class="negative">+51.2ä¸‡</td>
                                <td>2025/11</td>
                                <td>
                                    <a href="#" class="link">æµç¨‹å…³é—­</a>
                                    <a href="#" class="link">é‡æ–°æäº¤</a>
                                </td>
                                <td>
                                    <a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- è°ƒè–ªç®¡ç†å¼¹çª— -->
    <div id="payrollModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title">è°ƒè–ªç®¡ç†</div>
                <button class="modal-close" onclick="closePayrollModal()">&times;</button>
            </div>
            <div class="modal-content">
                <div class="container">
                    <div class="header">
                        <div class="page-title">è°ƒè–ªç®¡ç†</div>
                        <div class="page-subtitle">æµç¨‹ç¼–å·ï¼š123456 &nbsp;&nbsp;&nbsp; å®¡æ‰¹çŠ¶æ€ï¼šå¾…æäº¤</div>
                    </div>

                    <div class="content-card" style="margin-bottom: 16px;">
                        <div class="section-header">è°ƒè–ªæ±‡æ€»ä¿¡æ¯</div>
                        <div style="padding: 24px;">
                            <div class="summary-info">
                                <div class="summary-item">è°ƒè–ªéƒ¨é—¨ï¼š
                                    <select id="modalDepartmentSelect" class="date-selector">
                                        <option value="dept001" selected>ABCå·¥ä½œå®¤</option>
                                        <option value="dept002">æŠ€æœ¯éƒ¨</option>
                                        <option value="dept003">äº§å“éƒ¨</option>
                                        <option value="dept004">è¿è¥éƒ¨</option>
                                        <option value="dept005">å¸‚åœºéƒ¨</option>
                                    </select>
                                </div>
                                <div class="summary-item">è°ƒè–ªäººæ•°ï¼š<span id="modalEmployeeCount" class="summary-value">10äºº</span></div>
                                <div class="summary-item">ç”Ÿæ•ˆæ—¥æœŸï¼š
                                    <select id="modalEffectiveDate" class="date-selector">
                                        <option value="2024/12">2024/12</option>
                                        <option value="2025/01">2025/01</option>
                                        <option value="2025/02">2025/02</option>
                                        <option value="2025/03">2025/03</option>
                                        <option value="2025/04">2025/04</option>
                                        <option value="2025/05">2025/05</option>
                                        <option value="2025/06">2025/06</option>
                                        <option value="2025/07">2025/07</option>
                                        <option value="2025/08">2025/08</option>
                                        <option value="2025/09" selected>2025/09</option>
                                        <option value="2025/10">2025/10</option>
                                        <option value="2025/11">2025/11</option>
                                        <option value="2025/12">2025/12</option>
                                    </select>
                                </div>
                            </div>
                            <div class="cost-change-table">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 16px; font-size: 12px;">
                                    <thead>
                                        <tr style="background: #f5f5f5; border: 1px solid #ddd;">
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">ç±»å‹</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">è°ƒè–ªå‰</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">è°ƒè–ªå</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">å˜åŒ–å€¼</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">å˜åŒ–å¹…åº¦</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">æœˆè–ªåˆè®¡ï¼ˆä¸‡ï¼‰</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">120.5</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">138.8</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;"><span style="color: red;">+18.3</span></td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;"><span style="color: red;">+15.2%</span></td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">æœ¬å¹´å·¥èµ„æˆæœ¬é¢„è®¡ï¼ˆä¸‡ï¼‰</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">1446.0</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">1523.2</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;"><span style="color: red;">+77.2</span></td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;"><span style="color: red;">+5.3%</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="section-header">è°ƒè–ªæ˜ç»†ä¿¡æ¯</div>
                        <div style="padding: 8px 12px; display: flex; gap: 8px; border-bottom: 1px solid #c0c0c0; background: linear-gradient(to bottom, #f8f8f8 0%, #e8e8e8 100%);">
                            <button class="btn btn-primary" id="modalAddEmployeeBtn">æ·»åŠ å‘˜å·¥</button>
                            <button class="btn btn-secondary" id="modalDeleteSelectedBtn">åˆ é™¤é€‰æ‹©</button>
                        </div>
                        <div class="table-container">
                            <table id="modalPayrollTable">
                                <thead>
                                    <tr>
                                        <th rowspan="2" style="width: 40px;"><input type="checkbox" id="modalSelectAll" style="cursor: pointer;"></th>
                                        <th rowspan="2" style="text-align: center;">å‘˜å·¥ID</th>
                                        <th rowspan="2" style="text-align: center;">å§“å</th>
                                        <th rowspan="2" style="text-align: center;">éƒ¨é—¨</th>
                                        <th colspan="3" style="text-align: center;">æœˆè–ª</th>
                                        <th colspan="3" style="text-align: center;">CR</th>
                                        <th rowspan="2" style="text-align: center;">å…¥èŒæ—¶é—´</th>
                                        <th rowspan="2" style="text-align: center;">èŒçº§</th>
                                        <th rowspan="2" style="text-align: center;">æœ€è¿‘3å¹´ç»©æ•ˆ</th>
                                        <th rowspan="2" style="text-align: center;">è°ƒè–ªè¯´æ˜</th>
                                        <th rowspan="2" style="text-align: center;">æ“ä½œ</th>
                                    </tr>
                                    <tr>
                                        <th style="text-align: center;">è°ƒæ•´å‰</th>
                                        <th style="text-align: center;">è°ƒæ•´å</th>
                                        <th style="text-align: center;">å˜åŒ–</th>
                                        <th style="text-align: center;">è°ƒæ•´å‰</th>
                                        <th style="text-align: center;">è°ƒæ•´å</th>
                                        <th style="text-align: center;">å˜åŒ–</th>
                                    </tr>
                                </thead>
                                <tbody id="modalPayrollTableBody">
                                    <!-- è¡¨æ ¼æ•°æ®å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                                </tbody>
                            </table>
                        </div>
                        <div style="padding: 8px 12px; border-top: 1px solid #c0c0c0; background: linear-gradient(to bottom, #f8f8f8 0%, #e8e8e8 100%);">
                            <div style="margin-bottom: 4px; font-size: 11px; font-weight: bold; color: #000000;">è°ƒè–ªè¯´æ˜</div>
                            <textarea id="modalSalaryAdjustmentReason" placeholder="è¯·è¾“å…¥è°ƒè–ªåŸå› ..." style="width: 100%; min-height: 60px; padding: 4px 6px; border: 1px solid #808080; font-size: 11px; color: #000000; resize: vertical; outline: none; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.4; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); background: white;" onfocus="this.style.borderColor='#4a90e2'; this.style.boxShadow='inset 0 1px 2px rgba(0,0,0,0.1), 0 0 3px rgba(74,144,226,0.3)';" onblur="this.style.borderColor='#808080'; this.style.boxShadow='inset 0 1px 2px rgba(0,0,0,0.1)';"></textarea>
                        </div>
                        <div class="actions">
                            <button class="btn btn-secondary">ä¿å­˜</button>
                            <button class="btn btn-primary">æäº¤</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æ–°å»ºè°ƒè–ªæµç¨‹å¼¹çª— -->
    <div id="newPayrollModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <div class="modal-title">è°ƒè–ªç®¡ç†</div>
                <button class="modal-close" onclick="closeNewPayrollModal()">&times;</button>
            </div>
            <div class="modal-content">
                <div class="container">
                    <div class="header">
                        <div class="page-title">è°ƒè–ªç®¡ç†</div>
                        <div class="page-subtitle">æµç¨‹ç¼–å·ï¼š- &nbsp;&nbsp;&nbsp; å®¡æ‰¹çŠ¶æ€ï¼šå¾…æäº¤</div>
                    </div>

                    <div class="content-card" style="margin-bottom: 16px;">
                        <div class="section-header">è°ƒè–ªæ±‡æ€»ä¿¡æ¯</div>
                        <div style="padding: 24px;">
                            <div class="summary-info">
                                <div class="summary-item">è°ƒè–ªéƒ¨é—¨ï¼š
                                    <select id="newModalDepartmentSelect" class="date-selector">
                                        <option value="dept001" selected>ABCå·¥ä½œå®¤</option>
                                        <option value="dept002">æŠ€æœ¯éƒ¨</option>
                                        <option value="dept003">äº§å“éƒ¨</option>
                                        <option value="dept004">è¿è¥éƒ¨</option>
                                        <option value="dept005">å¸‚åœºéƒ¨</option>
                                    </select>
                                </div>
                                <div class="summary-item">è°ƒè–ªäººæ•°ï¼š<span id="newModalEmployeeCount" class="summary-value">0äºº</span></div>
                                <div class="summary-item">ç”Ÿæ•ˆæ—¥æœŸï¼š
                                    <select id="newModalEffectiveDate" class="date-selector">
                                        <option value="2024/12">2024/12</option>
                                        <option value="2025/01">2025/01</option>
                                        <option value="2025/02">2025/02</option>
                                        <option value="2025/03">2025/03</option>
                                        <option value="2025/04">2025/04</option>
                                        <option value="2025/05">2025/05</option>
                                        <option value="2025/06">2025/06</option>
                                        <option value="2025/07">2025/07</option>
                                        <option value="2025/08">2025/08</option>
                                        <option value="2025/09" selected>2025/09</option>
                                        <option value="2025/10">2025/10</option>
                                        <option value="2025/11">2025/11</option>
                                        <option value="2025/12">2025/12</option>
                                    </select>
                                </div>
                            </div>
                            <div class="cost-change-table">
                                <table style="width: 100%; border-collapse: collapse; margin-top: 16px; font-size: 12px;">
                                    <thead>
                                        <tr style="background: #f5f5f5; border: 1px solid #ddd;">
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">ç±»å‹</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">è°ƒè–ªå‰</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">è°ƒè–ªå</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">å˜åŒ–å€¼</th>
                                            <th style="padding: 8px; border: 1px solid #ddd; text-align: center;">å˜åŒ–å¹…åº¦</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">æœˆè–ªåˆè®¡ï¼ˆä¸‡ï¼‰</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">120.5</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;" id="newModalMonthlyAfter">120.5</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;" id="newModalMonthlyCostChange">0</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;" id="newModalMonthlyPercent">0%</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">æœ¬å¹´å·¥èµ„æˆæœ¬é¢„è®¡ï¼ˆä¸‡ï¼‰</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">1446.0</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;" id="newModalYearlyAfter">1446.0</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;" id="newModalYearlyCostChange">0</td>
                                            <td style="padding: 8px; border: 1px solid #ddd; text-align: center;" id="newModalYearlyPercent">0%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="content-card">
                        <div class="section-header">è°ƒè–ªæ˜ç»†ä¿¡æ¯</div>
                        <div style="padding: 8px 12px; display: flex; gap: 8px; border-bottom: 1px solid #c0c0c0; background: linear-gradient(to bottom, #f8f8f8 0%, #e8e8e8 100%);">
                            <button class="btn btn-primary" id="newModalAddEmployeeBtn">æ·»åŠ å‘˜å·¥</button>
                            <button class="btn btn-secondary" id="newModalDeleteSelectedBtn">åˆ é™¤é€‰æ‹©</button>
                        </div>
                        <div class="table-container">
                            <table id="newModalPayrollTable">
                                <thead>
                                    <tr>
                                        <th rowspan="2" style="width: 40px;"><input type="checkbox" id="newModalSelectAll" style="cursor: pointer;"></th>
                                        <th rowspan="2" style="text-align: center;">å‘˜å·¥ID</th>
                                        <th rowspan="2" style="text-align: center;">å§“å</th>
                                        <th rowspan="2" style="text-align: center;">éƒ¨é—¨</th>
                                        <th colspan="3" style="text-align: center;">æœˆè–ª</th>
                                        <th colspan="3" style="text-align: center;">CR</th>
                                        <th rowspan="2" style="text-align: center;">å…¥èŒæ—¶é—´</th>
                                        <th rowspan="2" style="text-align: center;">èŒçº§</th>
                                        <th rowspan="2" style="text-align: center;">æœ€è¿‘3å¹´ç»©æ•ˆ</th>
                                        <th rowspan="2" style="text-align: center;">è°ƒè–ªè¯´æ˜</th>
                                        <th rowspan="2" style="text-align: center;">æ“ä½œ</th>
                                    </tr>
                                    <tr>
                                        <th style="text-align: center;">è°ƒæ•´å‰</th>
                                        <th style="text-align: center;">è°ƒæ•´å</th>
                                        <th style="text-align: center;">å˜åŒ–</th>
                                        <th style="text-align: center;">è°ƒæ•´å‰</th>
                                        <th style="text-align: center;">è°ƒæ•´å</th>
                                        <th style="text-align: center;">å˜åŒ–</th>
                                    </tr>
                                </thead>
                                <tbody id="newModalPayrollTableBody">
                                    <!-- ç©ºè¡¨æ ¼ï¼Œæ— é¢„è®¾æ•°æ® -->
                                </tbody>
                            </table>
                        </div>
                        <div style="padding: 8px 12px; border-top: 1px solid #c0c0c0; background: linear-gradient(to bottom, #f8f8f8 0%, #e8e8e8 100%);">
                            <div style="margin-bottom: 4px; font-size: 11px; font-weight: bold; color: #000000;">è°ƒè–ªè¯´æ˜</div>
                            <textarea id="newModalSalaryAdjustmentReason" placeholder="è¯·è¾“å…¥è°ƒè–ªåŸå› ..." style="width: 100%; min-height: 60px; padding: 4px 6px; border: 1px solid #808080; font-size: 11px; color: #000000; resize: vertical; outline: none; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.4; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); background: white;" onfocus="this.style.borderColor='#4a90e2'; this.style.boxShadow='inset 0 1px 2px rgba(0,0,0,0.1), 0 0 3px rgba(74,144,226,0.3)';" onblur="this.style.borderColor='#808080'; this.style.boxShadow='inset 0 1px 2px rgba(0,0,0,0.1)';"></textarea>
                        </div>
                        <div class="actions">
                            <button class="btn btn-secondary">ä¿å­˜</button>
                            <button class="btn btn-primary">æäº¤</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- è°ƒè–ªè¯´æ˜å¼¹çª— -->
    <div id="salaryReasonModal" class="part-time-modal">
        <div class="part-time-modal-content">
            <div class="part-time-modal-header">
                <div class="part-time-modal-title">å¡«å†™è°ƒè–ªè¯´æ˜</div>
                <button class="part-time-modal-close" onclick="closeSalaryReasonModal()">&times;</button>
            </div>
            <div class="part-time-modal-body">
                <div class="part-time-employee-info">
                    <div class="employee-basic-info">
                        <span class="employee-name">å‘˜å·¥å§“åï¼š<strong id="salaryReasonEmployeeName">æå››</strong></span>
                    </div>
                </div>
                <div class="salary-reason-form">
                    <div style="margin-bottom: 8px; font-size: 12px; font-weight: bold; color: #333;">è°ƒè–ªè¯´æ˜</div>
                    <textarea id="salaryReasonTextarea" placeholder="è¯·è¾“å…¥è°ƒè–ªè¯´æ˜..." style="width: 100%; min-height: 120px; padding: 8px; border: 1px solid #d9d9d9; border-radius: 4px; font-size: 12px; color: #333; resize: vertical; outline: none; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.4; box-shadow: inset 0 1px 2px rgba(0,0,0,0.1); background: white;" onfocus="this.style.borderColor='#4a90e2'; this.style.boxShadow='inset 0 1px 2px rgba(0,0,0,0.1), 0 0 3px rgba(74,144,226,0.3)';" onblur="this.style.borderColor='#d9d9d9'; this.style.boxShadow='inset 0 1px 2px rgba(0,0,0,0.1)';"></textarea>
                </div>
            </div>
            <div class="part-time-modal-footer">
                <button class="part-time-modal-btn" onclick="closeSalaryReasonModal()">å–æ¶ˆ</button>
                <button class="part-time-modal-btn part-time-modal-btn-primary" id="confirmSalaryReasonBtn" onclick="confirmSalaryReason()">ç¡®å®š</button>
            </div>
        </div>
    </div>

    <script>
        // ä¸åŒçŠ¶æ€çš„è¡¨å¤´é…ç½®
        const tableHeaders = {
            'å¾…å‘èµ·': [
                'æµç¨‹ç¼–å·', 'æ‰€å±éƒ¨é—¨', 'è°ƒè–ªäººæ•°', 'æœˆè–ªå˜åŒ–', 
                'æœ¬å¹´å·¥èµ„æˆæœ¬å˜åŒ–', 'ç”Ÿæ•ˆæ—¶é—´', 'æ“ä½œ', 'è¯¦æƒ…'
            ],
            'è¿›è¡Œä¸­': [
                'æµç¨‹ç¼–å·', 'æ‰€å±éƒ¨é—¨', 'è°ƒè–ªäººæ•°', 'æœˆè–ªå˜åŒ–', 
                'æœ¬å¹´å·¥èµ„æˆæœ¬å˜åŒ–', 'ç”Ÿæ•ˆæ—¶é—´', 'æäº¤æ—¶é—´', 'å½“å‰å®¡æ‰¹äºº', 'è¯¦æƒ…'
            ],
            'å·²å®Œæˆ': [
                'æµç¨‹ç¼–å·', 'æ‰€å±éƒ¨é—¨', 'è°ƒè–ªäººæ•°', 'æœˆè–ªå˜åŒ–', 
                'æœ¬å¹´å·¥èµ„æˆæœ¬å˜åŒ–', 'ç”Ÿæ•ˆæ—¶é—´', 'æäº¤æ—¶é—´', 'è¯¦æƒ…'
            ],
            'å…¨éƒ¨': [
                'æµç¨‹ç¼–å·', 'æ‰€å±éƒ¨é—¨', 'è°ƒè–ªäººæ•°', 'æœˆè–ªå˜åŒ–', 
                'æœ¬å¹´å·¥èµ„æˆæœ¬å˜åŒ–', 'ç”Ÿæ•ˆæ—¶é—´', 'æäº¤æ—¶é—´', 'å®¡æ‰¹å•çŠ¶æ€', 'è¯¦æƒ…'
            ]
        };

        // ä¸åŒçŠ¶æ€çš„è¡¨æ ¼æ•°æ®
        const tableData = {
            'å¾…å‘èµ·': [
                ['123456', 'ABCå·¥ä½œå®¤', '10', '+18.3ä¸‡', '+77.2ä¸‡', '2025/09', 
                 '<a href="#" class="link">æµç¨‹å…³é—­</a><a href="#" class="link">é‡æ–°æäº¤</a>', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123457', 'æŠ€æœ¯éƒ¨', '15', '+25.6ä¸‡', '+102.4ä¸‡', '2025/10', 
                 '<a href="#" class="link">æµç¨‹å…³é—­</a><a href="#" class="link">é‡æ–°æäº¤</a>', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123458', 'äº§å“éƒ¨', '8', '+12.8ä¸‡', '+51.2ä¸‡', '2025/11', 
                 '<a href="#" class="link">æµç¨‹å…³é—­</a><a href="#" class="link">é‡æ–°æäº¤</a>', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>']
            ],
            'è¿›è¡Œä¸­': [
                ['123459', 'ABCå·¥ä½œå®¤', '12', '+22.1ä¸‡', '+88.4ä¸‡', '2025/09', '2024/12/15', 'å¼ ç»ç†', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123460', 'æŠ€æœ¯éƒ¨', '18', '+31.2ä¸‡', '+124.8ä¸‡', '2025/10', '2024/12/14', 'ææ€»ç›‘', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123461', 'äº§å“éƒ¨', '6', '+9.8ä¸‡', '+39.2ä¸‡', '2025/11', '2024/12/13', 'ç‹ä¸»ç®¡', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>']
            ],
            'å·²å®Œæˆ': [
                ['123462', 'ABCå·¥ä½œå®¤', '8', '+15.6ä¸‡', '+62.4ä¸‡', '2024/08', '2024/07/20', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123463', 'æŠ€æœ¯éƒ¨', '20', '+38.5ä¸‡', '+154.0ä¸‡', '2024/09', '2024/08/15', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123464', 'äº§å“éƒ¨', '5', '+7.2ä¸‡', '+28.8ä¸‡', '2024/10', '2024/09/10', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>']
            ],
            'å…¨éƒ¨': [
                ['123456', 'ABCå·¥ä½œå®¤', '10', '+18.3ä¸‡', '+77.2ä¸‡', '2025/09', '2024/12/16', 'å¾…å‘èµ·', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123459', 'ABCå·¥ä½œå®¤', '12', '+22.1ä¸‡', '+88.4ä¸‡', '2025/09', '2024/12/15', 'å®¡æ‰¹ä¸­', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>'],
                ['123462', 'ABCå·¥ä½œå®¤', '8', '+15.6ä¸‡', '+62.4ä¸‡', '2024/08', '2024/07/20', 'å·²å®Œæˆ', 
                 '<a href="#" class="link">æŸ¥çœ‹è¯¦æƒ…</a>']
            ]
        };

        // æ›´æ–°è¡¨æ ¼å†…å®¹
        function updateTable(status) {
            const thead = document.querySelector('thead tr');
            const tbody = document.querySelector('tbody');
            const actionBtn = document.querySelector('.action-btn');
            
            // æ›´æ–°è¡¨å¤´
            thead.innerHTML = '';
            tableHeaders[status].forEach(header => {
                const th = document.createElement('th');
                th.textContent = header;
                thead.appendChild(th);
            });
            
            // æ›´æ–°è¡¨æ ¼æ•°æ®
            tbody.innerHTML = '';
            tableData[status].forEach(rowData => {
                const tr = document.createElement('tr');
                rowData.forEach((cellData, index) => {
                    const td = document.createElement('td');
                    if (index === 3 || index === 4) { // æˆæœ¬å˜åŒ–åˆ—
                        td.classList.add('negative');
                    }
                    td.innerHTML = cellData;
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });
            
            // æ§åˆ¶æŒ‰é’®æ˜¾ç¤º
            if (status === 'å¾…å‘èµ·') {
                actionBtn.style.display = 'block';
            } else {
                actionBtn.style.display = 'none';
            }
            
            // é‡æ–°ç»‘å®šè¡¨æ ¼è¡Œç‚¹å‡»äº‹ä»¶
            bindTableRowEvents();
        }

        // ç»‘å®šè¡¨æ ¼è¡Œç‚¹å‡»äº‹ä»¶
        function bindTableRowEvents() {
            document.querySelectorAll('tbody tr').forEach(row => {
                row.addEventListener('click', function() {
                    document.querySelectorAll('tbody tr').forEach(r => r.style.backgroundColor = '');
                    this.style.backgroundColor = '#e0e8ff';
                });
            });
        }

        // çŠ¶æ€æ ‡ç­¾åˆ‡æ¢
        document.querySelectorAll('.status-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.status-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const status = this.textContent;
                updateTable(status);
            });
        });

        // èœå•é¡¹ç‚¹å‡»
        document.querySelectorAll('.menu-header').forEach(header => {
            header.addEventListener('click', function() {
                document.querySelectorAll('.menu-header').forEach(h => h.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // å¯¼èˆªæ ‡ç­¾åˆ‡æ¢
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            bindTableRowEvents();
            initializePayrollModal();
            initializeNewPayrollModal();
        });

        // å¼¹çª—æ§åˆ¶å‡½æ•°
        function openPayrollModal() {
            document.getElementById('payrollModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            initializeModalData();
        }

        function closePayrollModal() {
            document.getElementById('payrollModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // æ–°å»ºè°ƒè–ªæµç¨‹å¼¹çª—æ§åˆ¶å‡½æ•°
        function openNewPayrollModal() {
            document.getElementById('newPayrollModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            // ä¸åˆå§‹åŒ–ä»»ä½•æ•°æ®ï¼Œä¿æŒç©ºçŠ¶æ€
        }

        function closeNewPayrollModal() {
            document.getElementById('newPayrollModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ç‚¹å‡»å¼¹çª—èƒŒæ™¯å…³é—­å¼¹çª—
        document.getElementById('payrollModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closePayrollModal();
            }
        });

        // ç‚¹å‡»æ–°å¼¹çª—èƒŒæ™¯å…³é—­å¼¹çª—
        document.getElementById('newPayrollModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeNewPayrollModal();
            }
        });

        // åˆå§‹åŒ–å¼¹çª—æ•°æ®
        function initializeModalData() {
            const tbody = document.getElementById('modalPayrollTableBody');
            tbody.innerHTML = '';
            
            // åˆå§‹å‘˜å·¥æ•°æ®
            const initialEmployees = [
                ['2002', 'æå››', 'Aé¡¹ç›®éƒ¨\\ç¾æœ¯éƒ¨', '14300', '15730', '+1430 (+10.0%)', '0.80', '0.88', '+0.08', '2021/8/26', '11', '<span class="status-badge status-s">S</span>/<span class="status-badge status-a">A</span>/<span class="status-badge status-b">B</span>', true],
                ['3982', 'èƒ¡ä¸ƒ', 'Aé¡¹ç›®éƒ¨\\ç ”å‘éƒ¨', '20000', '22000', '+2000 (+10.0%)', '0.71', '0.78', '+0.07', '2018/12/4', '11', '<span class="status-badge status-a">A</span>/<span class="status-badge status-s">S</span>/<span class="status-badge status-a">A</span>', false],
                ['2732', 'å¼ ä¸‰', 'Aé¡¹ç›®éƒ¨\\ç­–åˆ’éƒ¨', '13800', '15190', '+1390 (+10.1%)', '0.87', '0.91', '+0.04', '2020/10/9', '15', '<span class="status-badge status-a">A</span>/<span class="status-badge status-b">B</span>/<span class="status-badge status-a">A</span>', true],
                ['7308', 'ç‹äº”', 'Aé¡¹ç›®éƒ¨\\ç¾æœ¯éƒ¨', '27800', '30580', '+2780 (+10.0%)', '0.72', '0.78', '+0.07', '2023/1/24', '10', 'æ— /<span class="status-badge status-a">A</span>/<span class="status-badge status-s">S</span>', false],
                ['3171', 'æä½³ä½³', 'Aé¡¹ç›®éƒ¨\\ç ”å‘éƒ¨', '13200', '14520', '+1320 (+10.0%)', '0.77', '0.84', '+0.08', '2018/6/13', '11', '<span class="status-badge status-b">B</span>/<span class="status-badge status-b">B</span>/<span class="status-badge status-b">B</span>', false],
                ['9682', 'é«˜ä¼Ÿ', 'Aé¡¹ç›®éƒ¨\\ç­–åˆ’éƒ¨', '11300', '12430', '+1130 (+10.0%)', '0.82', '0.90', '+0.08', '2022/4/2', '11', '<span class="status-badge status-a">A</span>/<span class="status-badge status-b">B</span>/<span class="status-badge status-a">A</span>', true],
                ['4198', 'é™ˆå°æ˜', 'Aé¡¹ç›®éƒ¨\\ç¾æœ¯éƒ¨', '18800', '20680', '+1880 (+10.0%)', '0.78', '0.86', '+0.08', '2019/12/18', '15', '<span class="status-badge status-s">S</span>/<span class="status-badge status-a">A</span>/<span class="status-badge status-b">B</span>', false],
                ['2013', 'ç‹å¿—å¼º', 'Aé¡¹ç›®éƒ¨\\ç ”å‘éƒ¨', '25800', '28380', '+2580 (+10.0%)', '0.84', '0.93', '+0.09', '2019/3/10', '15', '<span class="status-badge status-b">B</span>/<span class="status-badge status-s">S</span>/<span class="status-badge status-a">A</span>', false],
                ['6339', 'åˆ˜å°çº¢', 'Aé¡¹ç›®éƒ¨\\ç­–åˆ’éƒ¨', '13900', '15290', '+1390 (+10.0%)', '0.86', '0.94', '+0.08', '2020/6/15', '11', '<span class="status-badge status-a">A</span>/<span class="status-badge status-s">S</span>/<span class="status-badge status-s">S</span>', true],
                ['7541', 'èµµå¤©å¤©', 'Aé¡¹ç›®éƒ¨\\ç¾æœ¯éƒ¨', '23900', '26290', '+2390 (+10.0%)', '0.76', '0.83', '+0.07', '2016/3/10', '13', '<span class="status-badge status-s">S</span>/<span class="status-badge status-a">A</span>/<span class="status-badge status-a">A</span>', false]
            ];
            
            initialEmployees.forEach(employee => {
                addEmployeeRow(employee);
            });
            
            updateModalStatistics();
        }

        // æ·»åŠ å‘˜å·¥è¡Œ
        function addEmployeeRow(employeeData = null) {
            const tbody = document.getElementById('modalPayrollTableBody');
            const newRow = document.createElement('tr');
            
            if (employeeData) {
                // æ·»åŠ ç°æœ‰å‘˜å·¥æ•°æ®
                const [id, name, dept, oldSalary, newSalary, salaryChange, oldCR, newCR, crChange, joinDate, level, performance, hasPartTime] = employeeData;
                newRow.innerHTML = `
                    <td><input type="checkbox" class="modal-row-checkbox" style="cursor: pointer;"></td>
                    <td>${id}</td>
                    <td>${name}</td>
                    <td>${dept}</td>
                    <td>${oldSalary}</td>
                    <td>${newSalary}</td>
                    <td class="negative">${salaryChange}</td>
                    <td>${oldCR}</td>
                    <td>${newCR}</td>
                    <td class="negative">${crChange}</td>
                    <td>${joinDate}</td>
                    <td>${level}</td>
                    <td>${performance}</td>
                    <td>
                        <button class="part-time-rule" onclick="openSalaryReasonModal(this)">è°ƒè–ªè¯´æ˜</button>
                    </td>
                    <td><a href="#" class="link">æŸ¥çœ‹å‘˜å·¥æ¡£æ¡ˆ</a></td>
                `;
            } else {
                // æ·»åŠ ç©ºè¡Œç”¨äºè¾“å…¥æ–°å‘˜å·¥
                newRow.innerHTML = `
                    <td><input type="checkbox" class="modal-row-checkbox" style="cursor: pointer;"></td>
                    <td><input type="text" placeholder="è¯·è¾“å…¥å‘˜å·¥ID" class="employee-id-input" onchange="loadModalEmployeeData(this)"></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td><button class="part-time-rule" onclick="openSalaryReasonModal(this)">è°ƒè–ªè¯´æ˜</button></td>
                    <td><a href="#" class="link">æŸ¥çœ‹å‘˜å·¥æ¡£æ¡ˆ</a></td>
                `;
            }
            
            tbody.appendChild(newRow);
            
            // ä¸ºæ–°æ·»åŠ çš„å¤é€‰æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬
            const newCheckbox = newRow.querySelector('.modal-row-checkbox');
            newCheckbox.addEventListener('change', updateModalSelectAllStatus);
        }

        // æ¨¡æ‹Ÿå‘˜å·¥æ•°æ®åŠ è½½
        function loadModalEmployeeData(input) {
            const employeeId = input.value.trim();
            if (!employeeId) return;
            
            const row = input.closest('tr');
            const cells = row.querySelectorAll('td');
            
            // æ¨¡æ‹Ÿæ ¹æ®å‘˜å·¥IDåŠ è½½æ•°æ®
            const mockData = {
                name: 'æ–°å‘˜å·¥',
                dept: 'Aé¡¹ç›®éƒ¨\\ç¾æœ¯éƒ¨',
                currentSalary: '8000',
                newSalary: '8800',
                currentCR: '0.65',
                newCR: '0.72',
                salaryChange: '+800 (+10.0%)',
                crChange: '+0.07',
                joinDate: '2023-06-01',
                level: '11',
                performance: 'æ— /<span class="status-badge status-b">B</span>/<span class="status-badge status-a">A</span>',
                isPartTime: false
            };
            
            // å¡«å……æ•°æ®åˆ°è¡¨æ ¼
            cells[2].textContent = mockData.name;
            cells[3].textContent = mockData.dept;
            cells[4].textContent = mockData.currentSalary;
            cells[5].textContent = mockData.newSalary;
            cells[6].innerHTML = `<span class="negative">${mockData.salaryChange}</span>`;
            cells[7].textContent = mockData.currentCR;
            cells[8].textContent = mockData.newCR;
            cells[9].innerHTML = `<span class="negative">${mockData.crChange}</span>`;
            cells[10].textContent = mockData.joinDate;
            cells[11].textContent = mockData.level;
            cells[12].innerHTML = mockData.performance;
            
            // æ›´æ–°è°ƒè–ªè¯´æ˜æŒ‰é’®
            const salaryReasonButton = cells[13].querySelector('.part-time-rule');
            salaryReasonButton.disabled = false;
            salaryReasonButton.onclick = function() { openSalaryReasonModal(this); };
            
            updateModalStatistics();
        }

        // æ›´æ–°å¼¹çª—ç»Ÿè®¡æ•°æ®
        function updateModalStatistics() {
            const rows = document.querySelectorAll('#modalPayrollTableBody tr');
            let employeeCount = 0;
            let monthlyCostChange = 0;
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                // æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆçš„å‘˜å·¥æ•°æ®ï¼ˆç¬¬äºŒåˆ—ä¸ä¸ºç©ºä¸”ä¸æ˜¯è¾“å…¥æ¡†ï¼‰
                const idCell = cells[1];
                if (idCell && idCell.textContent.trim() && !idCell.querySelector('input')) {
                    employeeCount++;
                    // è·å–æœˆè–ªå˜åŒ–æ•°æ®ï¼ˆåœ¨ç¬¬7åˆ—ï¼‰
                    const salaryChangeCell = cells[6];
                    if (salaryChangeCell && salaryChangeCell.textContent.trim()) {
                        const changeText = salaryChangeCell.textContent.replace(/[^\d.-]/g, '');
                        const changeValue = parseFloat(changeText) || 0;
                        monthlyCostChange += changeValue;
                    }
                }
            });
            
            const yearlyCostChange = monthlyCostChange * 12;
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('modalEmployeeCount').textContent = employeeCount + 'äºº';
            document.getElementById('modalMonthlyCostChange').textContent = (monthlyCostChange >= 0 ? '+' : '') + (monthlyCostChange / 10000).toFixed(1) + 'ä¸‡';
            document.getElementById('modalYearlyCostChange').textContent = (yearlyCostChange >= 0 ? '+' : '') + (yearlyCostChange / 10000).toFixed(1) + 'ä¸‡';
        }

        // å¼¹çª—å…¨é€‰å¤é€‰æ¡†åŠŸèƒ½
        function updateModalSelectAllStatus() {
            const allCheckboxes = document.querySelectorAll('.modal-row-checkbox');
            const checkedCheckboxes = document.querySelectorAll('.modal-row-checkbox:checked');
            const selectAllCheckbox = document.getElementById('modalSelectAll');
            
            if (checkedCheckboxes.length === allCheckboxes.length) {
                selectAllCheckbox.checked = true;
                selectAllCheckbox.indeterminate = false;
            } else if (checkedCheckboxes.length === 0) {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = false;
            } else {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = true;
            }
        }

        // è°ƒè–ªè¯´æ˜å¼¹çª—åŠŸèƒ½
        function openSalaryReasonModal(button) {
            const modal = document.getElementById('salaryReasonModal');
            modal.style.display = 'block';
            
            // è·å–å½“å‰è¡Œçš„å‘˜å·¥ä¿¡æ¯
            const row = button.closest('tr');
            const cells = row.cells;
            const employeeName = cells[2].textContent;
            
            // æ›´æ–°å¼¹çª—ä¸­çš„å‘˜å·¥ä¿¡æ¯
            document.getElementById('salaryReasonEmployeeName').textContent = employeeName;
            
            // æ¸…ç©ºæ–‡æœ¬åŸŸ
            document.getElementById('salaryReasonTextarea').value = '';
            
            // ä¿å­˜å½“å‰æŒ‰é’®å¼•ç”¨
            modal.currentButton = button;
            
        }

        function closeSalaryReasonModal() {
            document.getElementById('salaryReasonModal').style.display = 'none';
        }

        function confirmSalaryReason() {
            const reasonText = document.getElementById('salaryReasonTextarea').value.trim();
            
            // æ›´æ–°æŒ‰é’®æ–‡æœ¬æ˜¾ç¤ºè°ƒè–ªè¯´æ˜çŠ¶æ€
            const modal = document.getElementById('salaryReasonModal');
            if (modal.currentButton) {
                if (reasonText) {
                    modal.currentButton.textContent = 'å·²å¡«å†™è¯´æ˜';
                    modal.currentButton.style.backgroundColor = '#52c41a';
                    modal.currentButton.style.color = 'white';
                } else {
                    modal.currentButton.textContent = 'è°ƒè–ªè¯´æ˜';
                    modal.currentButton.style.backgroundColor = '';
                    modal.currentButton.style.color = '';
                }
            }
            
            closeSalaryReasonModal();
        }

        // åˆå§‹åŒ–å¼¹çª—åŠŸèƒ½
        function initializePayrollModal() {
            // å…¨é€‰å¤é€‰æ¡†åŠŸèƒ½
            document.getElementById('modalSelectAll').addEventListener('change', function() {
                const checkboxes = document.querySelectorAll('.modal-row-checkbox');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                });
            });

            // æ·»åŠ å‘˜å·¥åŠŸèƒ½
            document.getElementById('modalAddEmployeeBtn').addEventListener('click', function() {
                addEmployeeRow();
                updateModalStatistics();
            });

            // åˆ é™¤é€‰æ‹©åŠŸèƒ½
            document.getElementById('modalDeleteSelectedBtn').addEventListener('click', function() {
                const checkedBoxes = document.querySelectorAll('.modal-row-checkbox:checked');
                checkedBoxes.forEach(checkbox => {
                    checkbox.closest('tr').remove();
                });
                updateModalSelectAllStatus();
                updateModalStatistics();
            });

            // ç”Ÿæ•ˆæ—¥æœŸé€‰æ‹©å™¨åŠŸèƒ½
            document.getElementById('modalEffectiveDate').addEventListener('change', function() {
                console.log('ç”Ÿæ•ˆæ—¥æœŸå·²æ›´æ”¹ä¸º:', this.value);
            });
        }
        
        // åˆå§‹åŒ–æ–°å»ºè°ƒè–ªæµç¨‹å¼¹çª—åŠŸèƒ½
        function initializeNewPayrollModal() {
            // å…¨é€‰å¤é€‰æ¡†åŠŸèƒ½
            document.getElementById('newModalSelectAll').addEventListener('change', function() {
                const checkboxes = document.querySelectorAll('#newModalPayrollTableBody .modal-row-checkbox');
                checkboxes.forEach(checkbox => {
                    checkbox.checked = this.checked;
                });
            });

            // æ·»åŠ å‘˜å·¥åŠŸèƒ½
            document.getElementById('newModalAddEmployeeBtn').addEventListener('click', function() {
                addNewEmployeeRow();
            });

            // åˆ é™¤é€‰æ‹©åŠŸèƒ½
            document.getElementById('newModalDeleteSelectedBtn').addEventListener('click', function() {
                const checkedBoxes = document.querySelectorAll('#newModalPayrollTableBody .modal-row-checkbox:checked');
                checkedBoxes.forEach(checkbox => {
                    checkbox.closest('tr').remove();
                });
                updateNewModalStatistics();
            });

            // ç”Ÿæ•ˆæ—¥æœŸé€‰æ‹©å™¨åŠŸèƒ½
            document.getElementById('newModalEffectiveDate').addEventListener('change', function() {
                console.log('æ–°å¼¹çª—ç”Ÿæ•ˆæ—¥æœŸå·²æ›´æ”¹ä¸º:', this.value);
            });
        }
        // ä¸ºæ–°å¼¹çª—æ·»åŠ å‘˜å·¥è¡Œ
        function addNewEmployeeRow() {
            const tbody = document.getElementById('newModalPayrollTableBody');
            const newRow = document.createElement('tr');
            
            // æ·»åŠ ç©ºè¡Œç”¨äºè¾“å…¥æ–°å‘˜å·¥
            newRow.innerHTML = `
                <td><input type="checkbox" class="modal-row-checkbox" style="cursor: pointer;"></td>
                <td><input type="text" placeholder="è¯·è¾“å…¥å‘˜å·¥ID" class="employee-id-input" onchange="loadNewModalEmployeeData(this)"></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td><button class="part-time-rule" onclick="openSalaryReasonModal(this)">è°ƒè–ªè¯´æ˜</button></td>
                <td><a href="#" class="link">æŸ¥çœ‹å‘˜å·¥æ¡£æ¡ˆ</a></td>
            `;
            
            tbody.appendChild(newRow);
            
            // ä¸ºæ–°æ·»åŠ çš„å¤é€‰æ¡†æ·»åŠ äº‹ä»¶ç›‘å¬
            const newCheckbox = newRow.querySelector('.modal-row-checkbox');
            newCheckbox.addEventListener('change', updateNewModalSelectAllStatus);
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateNewModalStatistics();
        }
        
        // æ¨¡æ‹Ÿæ–°å¼¹çª—å‘˜å·¥æ•°æ®åŠ è½½
        function loadNewModalEmployeeData(input) {
            const employeeId = input.value.trim();
            if (!employeeId) return;
            
            const row = input.closest('tr');
            const cells = row.querySelectorAll('td');
            
            // æ¨¡æ‹Ÿæ ¹æ®å‘˜å·¥IDåŠ è½½æ•°æ®
            const mockData = {
                name: 'æ–°å‘˜å·¥',
                dept: 'Aé¡¹ç›®éƒ¨\\ç¾æœ¯éƒ¨',
                currentSalary: '8000',
                currentCR: '0.65',
                joinDate: '2023-06-01',
                level: '11',
                performance: 'æ— /<span class="status-badge status-b">B</span>/<span class="status-badge status-a">A</span>',
                isPartTime: false
            };
            
            // å¡«å……æ•°æ®åˆ°è¡¨æ ¼
            cells[2].textContent = mockData.name;
            cells[3].textContent = mockData.dept;
            cells[4].textContent = mockData.currentSalary;
            // è°ƒè–ªåæœˆè–ªè®¾ä¸ºå¯ç¼–è¾‘è¾“å…¥æ¡†
            cells[5].innerHTML = '<input type="number" class="salary-input" placeholder="è¯·è¾“å…¥è°ƒè–ªåæœˆè–ª" onchange="calculateSalaryChange(this)" style="width: 80px; border: 1px solid #d9d9d9; padding: 2px 4px;">';
            cells[6].innerHTML = '0 (0%)';
            cells[7].textContent = mockData.currentCR;
            // CRè°ƒè–ªåè‡ªåŠ¨è®¡ç®—ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥
            cells[8].innerHTML = '<span class="auto-calculated-cr">-</span>';
            cells[9].innerHTML = '0';
            cells[10].textContent = mockData.joinDate;
            cells[11].textContent = mockData.level;
            cells[12].innerHTML = mockData.performance;
            
            // æ›´æ–°è°ƒè–ªè¯´æ˜æŒ‰é’®
            const salaryReasonButton = cells[13].querySelector('.part-time-rule');
            salaryReasonButton.disabled = false;
            
            updateNewModalStatistics();
        }
        
        // æ›´æ–°æ–°å¼¹çª—ç»Ÿè®¡æ•°æ®
        function updateNewModalStatistics() {
            const rows = document.querySelectorAll('#newModalPayrollTableBody tr');
            let employeeCount = 0;
            let totalSalaryChange = 0;
            
            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                // æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆçš„å‘˜å·¥æ•°æ®ï¼ˆå§“åä¸ä¸ºç©ºï¼‰
                const nameCell = cells[2];
                if (nameCell && nameCell.textContent.trim()) {
                    employeeCount++;
                    
                    // è®¡ç®—è–ªèµ„å˜åŒ–æ€»é¢
                    const currentSalary = parseFloat(cells[4].textContent) || 0;
                    const salaryInput = cells[5].querySelector('input');
                    const newSalary = salaryInput ? parseFloat(salaryInput.value) || 0 : 0;
                    if (newSalary > 0) {
                        totalSalaryChange += (newSalary - currentSalary);
                    }
                }
            });
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('newModalEmployeeCount').textContent = employeeCount + 'äºº';
            
            // è·å–ç”Ÿæ•ˆæœˆä»½
            const effectiveDate = document.getElementById('newModalEffectiveDate').value;
            let effectiveMonth = 12; // é»˜è®¤12æœˆ
            if (effectiveDate) {
                effectiveMonth = new Date(effectiveDate).getMonth() + 1; // getMonth()è¿”å›0-11ï¼Œéœ€è¦+1
            }
            
            // è®¡ç®—å¹´åº¦å½±å“æœˆæ•°ï¼š12æœˆï¼ç”Ÿæ•ˆæœˆä»½+1
            const yearlyMonths = 12 - effectiveMonth + 1;
            
            // æ›´æ–°æˆæœ¬å˜åŒ–ï¼ˆä»¥ä¸‡ä¸ºå•ä½ï¼‰
            const monthlyCostChange = (totalSalaryChange / 10000).toFixed(1);
            const yearlyCostChange = (totalSalaryChange * yearlyMonths / 10000).toFixed(1);
            
            // è®¡ç®—è°ƒè–ªåçš„æˆæœ¬
            const monthlyBefore = 120.5;
            const yearlyBefore = 1446.0;
            const monthlyAfter = (monthlyBefore + parseFloat(monthlyCostChange)).toFixed(1);
            const yearlyAfter = (yearlyBefore + parseFloat(yearlyCostChange)).toFixed(1);
            
            // è®¡ç®—å˜åŒ–ç™¾åˆ†æ¯”
            const monthlyPercent = monthlyBefore > 0 ? ((parseFloat(monthlyCostChange) / monthlyBefore) * 100).toFixed(1) : 0;
            const yearlyPercent = yearlyBefore > 0 ? ((parseFloat(yearlyCostChange) / yearlyBefore) * 100).toFixed(1) : 0;
            
            // è®¾ç½®é¢œè‰²ï¼šæ­£æ•°çº¢è‰²ï¼Œè´Ÿæ•°ç»¿è‰²
            const monthlyColor = totalSalaryChange > 0 ? 'red' : (totalSalaryChange < 0 ? 'green' : 'black');
            const yearlyColor = totalSalaryChange > 0 ? 'red' : (totalSalaryChange < 0 ? 'green' : 'black');
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('newModalMonthlyAfter').textContent = monthlyAfter;
            document.getElementById('newModalMonthlyCostChange').innerHTML = `<span style="color: ${monthlyColor}">${totalSalaryChange >= 0 ? '+' : ''}${monthlyCostChange}</span>`;
            document.getElementById('newModalMonthlyPercent').innerHTML = `<span style="color: ${monthlyColor}">${totalSalaryChange >= 0 ? '+' : ''}${monthlyPercent}%</span>`;
            
            document.getElementById('newModalYearlyAfter').textContent = yearlyAfter;
            document.getElementById('newModalYearlyCostChange').innerHTML = `<span style="color: ${yearlyColor}">${totalSalaryChange >= 0 ? '+' : ''}${yearlyCostChange}</span>`;
            document.getElementById('newModalYearlyPercent').innerHTML = `<span style="color: ${yearlyColor}">${totalSalaryChange >= 0 ? '+' : ''}${yearlyPercent}%</span>`;
        }
        
        // æ–°å¼¹çª—å…¨é€‰å¤é€‰æ¡†åŠŸèƒ½
        function updateNewModalSelectAllStatus() {
            const allCheckboxes = document.querySelectorAll('#newModalPayrollTableBody .modal-row-checkbox');
            const checkedCheckboxes = document.querySelectorAll('#newModalPayrollTableBody .modal-row-checkbox:checked');
            const selectAllCheckbox = document.getElementById('newModalSelectAll');
            
            if (checkedCheckboxes.length === allCheckboxes.length && allCheckboxes.length > 0) {
                selectAllCheckbox.checked = true;
                selectAllCheckbox.indeterminate = false;
            } else if (checkedCheckboxes.length === 0) {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = false;
            } else {
                selectAllCheckbox.checked = false;
                selectAllCheckbox.indeterminate = true;
            }
        }
        
        // è®¡ç®—è–ªèµ„å˜åŒ–
        function calculateSalaryChange(input) {
            const row = input.closest('tr');
            const cells = row.querySelectorAll('td');
            
            const currentSalary = parseFloat(cells[4].textContent) || 0;
            const newSalary = parseFloat(input.value) || 0;
            
            if (newSalary > 0) {
                const change = newSalary - currentSalary;
                const changePercent = currentSalary > 0 ? ((change / currentSalary) * 100).toFixed(1) : 0;
                
                // æ ¹æ®å˜åŒ–å€¼è®¾ç½®é¢œè‰²ï¼šæ­£æ•°çº¢è‰²ï¼Œè´Ÿæ•°ç»¿è‰²
                const color = change > 0 ? 'red' : (change < 0 ? 'green' : 'black');
                cells[6].innerHTML = `<span style="color: ${color}">${change >= 0 ? '+' : ''}${change} (${change >= 0 ? '+' : ''}${changePercent}%)</span>`;
                
                // è‡ªåŠ¨è®¡ç®—è°ƒè–ªåCRï¼ˆæŒ‰8000å¯¹åº”0.65çš„æ¯”ä¾‹ï¼‰
                const currentCR = parseFloat(cells[7].textContent) || 0;
                const newCR = (newSalary * 0.65 / 8000).toFixed(2);
                const crChange = (newCR - currentCR).toFixed(2);
                
                // æ›´æ–°CRè°ƒè–ªåå€¼
                cells[8].innerHTML = `<span class="auto-calculated-cr">${newCR}</span>`;
                
                // æ›´æ–°CRå˜åŒ–æ˜¾ç¤ºï¼Œæ­£æ•°çº¢è‰²ï¼Œè´Ÿæ•°ç»¿è‰²
                const crColor = crChange > 0 ? 'red' : (crChange < 0 ? 'green' : 'black');
                cells[9].innerHTML = `<span style="color: ${crColor}">${crChange >= 0 ? '+' : ''}${crChange}</span>`;
            } else {
                cells[6].innerHTML = '0 (0%)';
                cells[8].innerHTML = '<span class="auto-calculated-cr">-</span>';
                cells[9].innerHTML = '0';
            }
            
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            updateNewModalStatistics();
        }
        

    </script>
</body>
</html>